define("position",["require","exports","module","jquery"],function(e,t,n){function f(e){e=d(e)||{},e.nodeType&&(e={element:e});var t=d(e.element)||i;if(t.nodeType!==1)throw new Error("posObject.element is invalid.");var n={element:t,x:e.x||0,y:e.y||0},r=t===i||t._id==="VIEWPORT";return n.offset=function(){return o?{left:0,top:0}:r?{left:s(document).scrollLeft(),top:s(document).scrollTop()}:v(s(t)[0])},n.size=function(){var e=r?s(window):s(t);return{width:e.outerWidth(),height:e.outerHeight()}},n}function l(e){e.x=c(e.x,e,"width"),e.y=c(e.y,e,"height")}function c(e,t,n){e+="",e=e.replace(/px/gi,""),/\D/.test(e)&&(e=e.replace(/(?:top|left)/gi,"0%").replace(/center/gi,"50%").replace(/(?:bottom|right)/gi,"100%")),e.indexOf("%")!==-1&&(e=e.replace(/(\d+(?:\.\d+)?)%/gi,function(e,r){return t.size()[n]*(r/100)}));if(/[+\-*\/]/.test(e))try{e=(new Function("return "+e))()}catch(r){throw new Error("Invalid position value: "+e)}return p(e)}function h(e){var t=e.offsetParent();t[0]===document.documentElement&&(t=s(document.body)),a&&t.css("zoom",1);var n;return t[0]===document.body&&t.css("position")==="static"?n={top:0,left:0}:n=v(t[0]),n.top+=p(t.css("border-top-width")),n.left+=p(t.css("border-left-width")),n}function p(e){return parseFloat(e,10)||0}function d(e){return s(e)[0]}function v(e){var t=e.getBoundingClientRect(),n=document.documentElement;return{left:t.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}var r=t,i={_id:"VIEWPORT",nodeType:1},s=e("jquery"),o=!1,u=(window.navigator.userAgent||"").toLowerCase(),a=u.indexOf("msie 6")!==-1;r.pin=function(e,t){e=f(e),t=f(t);if(e.element===i||e.element._id==="VIEWPORT")return;var n=s(e.element);n.css("position")!=="fixed"||a?(n.css("position","absolute"),o=!1):o=!0,l(e),l(t);var r=h(n),u=t.offset(),c=u.top+t.y-e.y-r.top,p=u.left+t.x-e.x-r.left;n.css({left:p,top:c})},r.center=function(e,t){r.pin({element:e,x:"50%",y:"50%"},{element:t,x:"50%",y:"50%"})},r.VIEWPORT=i});
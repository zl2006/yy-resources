/*!
 * Platform.js v1.2.0 <http://mths.be/platform>
 * Copyright 2010-2014 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <http://mths.be/mit>
 */

define("platform",["require","exports","module"],function(e,t,n){(function(){function d(e){return e=String(e),e.charAt(0).toUpperCase()+e.slice(1)}function v(e,t){var n=-1,r=e?e.length:0;if(typeof r=="number"&&r>-1&&r<=a)while(++n<r)t(e[n],n,e);else g(e,t)}function m(e){return e=S(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:d(e)}function g(e,t){for(var n in e)h.call(e,n)&&t(e[n],n,e)}function y(e){return e==null?d(e):p.call(e).slice(8,-1)}function b(e,t){var n=e!=null?typeof e[t]:"number";return!/^(?:boolean|number|string|undefined)$/.test(n)&&(n=="object"?!!e[t]:!0)}function w(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function E(e,t){var n=null;return v(e,function(r,i){n=t(n,r,i,e)}),n}function S(e){return String(e).replace(/^ +| +$/g,"")}function x(e){function W(t){return E(t,function(t,n){return t||RegExp("\\b"+(n.pattern||w(n))+"\\b","i").exec(e)&&(n.label||n)})}function X(t){return E(t,function(t,n,r){return t||(n[R]||n[0,/^[a-z]+(?: +[a-z]+\b)*/i.exec(R)]||RegExp("\\b"+w(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})}function V(t){return E(t,function(t,n){return t||RegExp("\\b"+(n.pattern||w(n))+"\\b","i").exec(e)&&(n.label||n)})}function $(t){return E(t,function(t,n){var r=n.pattern||w(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(_={6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},/^Win/i.test(t)&&(_=_[0,/[\d.]+$/.exec(t)])&&(t="Windows "+_,F=_=="Server 2008 R2 / 7"),t=m(String(t).replace(RegExp(r,"i"),n.label||n).replace(/ ce$/i," CE").replace(/hpw/i,"web").replace(/Macintosh/,"Mac OS").replace(/_PowerPC/i," OS").replace(/(OS X) [^ \d]+/i,"$1").replace(/Mac (OS X)/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/x86\.64/gi,"x86_64").replace(/(Windows Phone)(?! OS)/,"$1 OS").split(" on ")[0])),t})}function J(t){return E(t,function(t,n){var r=n.pattern||w(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=m(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function K(t){return E(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}function Q(){return this.description||""}var t=r,n=e&&typeof e=="object"&&y(e)!="String";n&&(t=e,e=null);var s=t.navigator||{},o=s.userAgent||"";e||(e=o);var u=n||l==i,a=n?!!s.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(p.toString()),c="Object",h=n?c:"ScriptBridgingProxyObject",d=n?c:"Environment",v=n&&t.java?"JavaPackage":y(t.java),T=n?c:"RuntimeObject",N=/Java/.test(v)&&t.java,C=N&&y(t.environment)==d,k=N?"a":"α",L=N?"b":"β",A=t.document||{},O=t.operamini||t.opera,M=f.test(M=n&&O?O["[[Class]]"]:y(O))?M:O=null,_,D=e,P=[],H=null,B=e==o,j=B&&O&&typeof O.version=="function"&&O.version(),F,I=W([{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","Trident","KHTML","Gecko"]),q=V(["Adobe AIR","Arora","Avant Browser","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel",{label:"SRWare Iron",pattern:"Iron"},"K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini","Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"MSIE"},"Safari"]),R=J([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation 4","PlayStation 3","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),U=X({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),z=$(["Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);I&&(I=[I]),U&&!R&&(R=J([U]));if(_=/Google TV/.exec(R))R=_[0];/\bSimulator\b/i.test(e)&&(R=(R?R+" ":"")+"Simulator");if(/^iP/.test(R))q||(q="Safari"),z="iOS"+((_=/ OS ([\d_]+)/i.exec(e))?" "+_[1].replace(/_/g,"."):"");else if(q=="Konqueror"&&!/buntu/i.test(z))z="Kubuntu";else if(U&&U!="Google"&&(/Chrome/.test(q)&&!/Mobile Safari/.test(e)||/Vita/.test(R)))q="Android Browser",z=/Android/.test(z)?z:"Android";else if(!q||(_=!/\bMinefield\b|\(Android;/i.test(e)&&/Firefox|Safari/.exec(q)))q&&!R&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(_+"/")+8))&&(q=null),(_=R||U||z)&&(R||U||/Android|Symbian OS|Tablet OS|webOS/.test(z))&&(q=/[a-z]+(?: Hat)?/i.exec(/Android/.test(z)?z:_)+" Browser");(_=/\((Mobile|Tablet).*?Firefox/i.exec(e))&&_[1]&&(z="Firefox OS",R||(R=_[1])),j||(j=K(["(?:Cloud9|CriOS|CrMo|Iron|Opera ?Mini|OPR|Raven|Silk(?!/[\\d.]+$))","Version",w(q),"(?:Firefox|Minefield|NetFront)"])),I=="iCab"&&parseFloat(j)>3?I=["WebKit"]:(_=/Opera/.test(q)&&(/OPR/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&"WebKit"||!I&&/\bMSIE\b/i.test(e)&&(z=="Mac OS"?"Tasman":"Trident"))?I=[_]:/PlayStation(?! Vita)/i.test(q)&&I=="WebKit"&&(I=["NetFront"]),q!="IE"&&I=="Trident"&&(_=/\brv:([\d.]+)/.exec(e))&&(q&&P.push("identifying as "+q+(j?" "+j:"")),q="IE",j=_[1]);if(B){if(b(t,"global")){N&&(_=N.lang.System,D=_.getProperty("os.arch"),z=z||_.getProperty("os.name")+" "+_.getProperty("os.version"));if(u&&b(t,"system")&&(_=[t.system])[0]){z||(z=_[0].os||null);try{_[1]=t.require("ringo/engine").version,j=_[1].join("."),q="RingoJS"}catch(G){_[0].global.system==t.system&&(q="Narwhal")}}else typeof t.process=="object"&&(_=t.process)?(q="Node.js",D=_.arch,z=_.platform,j=/[\d.]+/.exec(_.version)[0]):C&&(q="Rhino")}else y(_=t.runtime)==h?(q="Adobe AIR",z=_.flash.system.Capabilities.os):y(_=t.phantom)==T?(q="PhantomJS",j=(_=_.version||null)&&_.major+"."+_.minor+"."+_.patch):typeof A.documentMode=="number"&&(_=/\bTrident\/(\d+)/i.exec(e))&&(j=[j,A.documentMode],(_=+_[1]+4)!=j[1]&&(P.push("IE "+j[1]+" mode"),I&&(I[1]=""),j[1]=_),j=q=="IE"?String(j[1].toFixed(1)):j[0]);z=z&&m(z)}j&&(_=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(j)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(B&&s.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(H=/b/i.test(_)?"beta":"alpha",j=j.replace(RegExp(_+"\\+?$"),"")+(H=="beta"?L:k)+(/\d+\+?/.exec(_)||"")),q=="Fennec"||q=="Firefox"&&/Android|Firefox OS/.test(z)?q="Firefox Mobile":q=="Maxthon"&&j?j=j.replace(/\.[\d.]+/,".x"):q=="Silk"?(/Mobi/i.test(e)||(z="Android",P.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&P.unshift("accelerated")):q=="IE"&&(_=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(q+=" Mobile",z="Windows Phone OS "+_+".x",P.unshift("desktop mode")):/Xbox/i.test(R)?(z=null,R=="Xbox 360"&&/IEMobile/.test(e)&&P.unshift("mobile mode")):(q=="Chrome"||q=="IE"||q&&!R&&!/Browser|Mobi/.test(q))&&(z=="Windows CE"||/Mobi/i.test(e))?q+=" Mobile":q=="IE"&&B&&t.external===null?P.unshift("platform preview"):(/BlackBerry/.test(R)||/BB10/.test(e))&&(_=(RegExp(R.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||j)?(_=[_,/BB10/.test(e)],z=(_[1]?(R=null,U="BlackBerry"):"Device Software")+" "+_[0],j=null):this!=g&&R!="Wii"&&(B&&O||/Opera/.test(q)&&/\b(?:MSIE|Firefox)\b/i.test(e)||q=="Firefox"&&/OS X (?:\d+\.){2,}/.test(z)||q=="IE"&&(z&&!/^Win/.test(z)&&j>5.5||/Windows XP/.test(z)&&j>8||j==8&&!/Trident/.test(e)))&&!f.test(_=x.call(g,e.replace(f,"")+";"))&&_.name&&(_="ing as "+_.name+((_=_.version)?" "+_:""),f.test(q)?(/IE/.test(_)&&z=="Mac OS"&&(z=null),_="identify"+_):(_="mask"+_,M?q=m(M.replace(/([a-z])([A-Z])/g,"$1 $2")):q="Opera",/IE/.test(_)&&(z=null),B||(j=null)),I=["Presto"],P.push(_));if(_=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1]){_=[parseFloat(_.replace(/\.(\d)$/,".0$1")),_];if(q=="Safari"&&_[1].slice(-1)=="+")q="WebKit Nightly",H="alpha",j=_[1].slice(0,-1);else if(j==_[1]||j==(_[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1]))j=null;_[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],_[0]==537.36&&_[2]==537.36&&parseFloat(_[1])>=28&&(I=["Blink"]),!B||!a&&!_[1]?(I&&(I[1]="like Safari"),_=(_=_[0],_<400?1:_<500?2:_<526?3:_<533?4:_<534?"4+":_<535?5:_<537?6:_<538?7:"7")):(I&&(I[1]="like Chrome"),_=_[1]||(_=_[0],_<530?1:_<532?2:_<532.05?3:_<533?4:_<534.03?5:_<534.07?6:_<534.1?7:_<534.13?8:_<534.16?9:_<534.24?10:_<534.3?11:_<535.01?12:_<535.02?"13+":_<535.07?15:_<535.11?16:_<535.19?17:_<536.05?18:_<536.1?19:_<537.01?20:_<537.11?"21+":_<537.13?23:_<537.18?24:_<537.24?25:_<537.36?26:I!="Blink"?"27":"28")),I&&(I[1]+=" "+(_+=typeof _=="number"?".x":/[.+]/.test(_)?"":"+")),q=="Safari"&&(!j||parseInt(j)>45)&&(j=_)}q=="Opera"&&(_=/(?:zbov|zvav)$/.exec(z))?(q+=" ",P.unshift("desktop mode"),_=="zvav"?(q+="Mini",j=null):q+="Mobile"):q=="Safari"&&/Chrome/.exec(I&&I[1])&&(P.unshift("desktop mode"),q="Chrome Mobile",j=null,/OS X/.test(z)?(U="Apple",z="iOS 4.3+"):z=null),j&&j.indexOf(_=/[\d.]+$/.exec(z))==0&&e.indexOf("/"+_+"-")>-1&&(z=S(z.replace(_,""))),I&&!/Avant|Nook/.test(q)&&(/Browser|Lunascape|Maxthon/.test(q)||/^(?:Adobe|Arora|Midori|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(q)&&I[1])&&(_=I[I.length-1])&&P.push(_),P.length&&(P=["("+P.join("; ")+")"]),U&&R&&R.indexOf(U)<0&&P.push("on "+U),R&&P.push((/^on /.test(P[P.length-1])?"":"on ")+R),z&&(_=/ ([\d.+]+)$/.exec(z),z={architecture:32,family:_&&!F?z.replace(_[0],""):z,version:_?_[1]:null,toString:function(){var e=this.version;return this.family+(e&&!F?" "+e:"")+(this.architecture==64?" 64-bit":"")}}),(_=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(D))&&!/\bi686\b/i.test(D)&&(z&&(z.architecture=64,z.family=z.family.replace(RegExp(" *"+_),"")),q&&(/WOW64/i.test(e)||B&&/\w(?:86|32)$/.test(s.cpuClass||s.platform))&&P.unshift("32-bit")),e||(e=null);var Y={};return Y.description=e,Y.layout=I&&I[0],Y.manufacturer=U,Y.name=q,Y.prerelease=H,Y.product=R,Y.ua=e,Y.version=q&&j,Y.os=z||{architecture:null,family:null,version:null,toString:function(){return"null"}},Y.parse=x,Y.toString=Q,Y.version&&P.unshift(j),Y.name&&P.unshift(q),z&&q&&(z!=String(z).split(" ")[0]||z!=q.split(" ")[0]&&!R)&&P.push(R?"("+z+")":"on "+z),P.length&&(Y.description=P.join(" ")),Y}var e={"function":!0,object:!0},r=e[typeof window]&&window||this,i=r,s=e[typeof t]&&t,o=e[typeof n]&&n&&!n.nodeType&&n,u=s&&o&&typeof global=="object"&&global;u&&(u.global===u||u.window===u||u.self===u)&&(r=u);var a=Math.pow(2,53)-1,f=/Opera/,l=this,c=Object.prototype,h=c.hasOwnProperty,p=c.toString;typeof define=="function"&&typeof define.amd=="object"&&define.amd?n.exports=x():s&&o?g(x(),function(e,t){s[t]=e}):r.platform=x()}).call(this)});
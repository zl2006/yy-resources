define(function(a,b,c){function d(a){var b="=",c="&",d={};if(!a)return d;a=a.replace(/^\?/,"");for(var e,f,g,h,i=a.split(c),j=0,k=i.length;k>j;j++)f=i[j],e=f.indexOf(b),g=decodeURIComponent(f.substring(0,e))||"",h=decodeURIComponent(f.substring(e+1))||"",d.hasOwnProperty(g)?d[g].push(h):d[g]=[h];return d}function e(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var d=encodeURIComponent(c),e=a[c];if(f(e))for(var g=0,h=e.length;h>g;g++)b.push(d+"="+encodeURIComponent(e[g]));else b.push(d+"="+encodeURIComponent(e))}return(0===b.length?"":"?")+b.join("&")}function f(a){return"[object Array]"===Object.prototype.toString.call(a)}var g=/^((?:(\w+:)\/\/)?((\w+):?(\w+)?@)?(([^\/\?:]+)(?:\:(\d+))?))(\/[^\?#]+)?(\?[^#]+)?(#.*)?/,h=function(a){var b=g.exec(a);this.uri=a,this.origin=b[1],this.protocol=b[2],this.authority,this.username=b[4],this.password=b[5],this.host=b[6]||"",this.hostname=b[7]||"",this.port=b[8]||"",this.path=b[9]||"/",this.search=b[10]||"",this._query=d(this.search),this.hash=b[11]||""};h.prototype.getOrigin=function(){return this.protocol+"//"+this.getHost()},h.prototype.getHost=function(){return this.hostname+(this.port?":"+this.port:"")},h.prototype.getParam=function(a){return this._query.hasOwnProperty(a)?this._query[a][0]:null},h.prototype.getParams=function(a){return this._query.hasOwnProperty(a)?this._query[a]:[]},h.prototype.delParam=function(a){try{delete this._query[a],this.search=e(this._query)}catch(b){}return this},h.prototype.setParam=function(a,b){return f(b)||(b=[b]),this._query[a]=b,this.search=e(this._query),this},h.prototype.addParam=function(a,b){return f(b)||(b=[b]),this._query[a]=this._query.hasOwnProperty(a)?this._query[a].concat(b):b,this.search=e(this._query),this},h.prototype.clearParams=function(){return this._query={},this.search=e(this._query),this},h.prototype.toString=function(){return this.protocol+"//"+(this.username?this.username+":"+this.password+"@":"")+this.hostname+(this.port?":"+this.port:"")+this.path+e(this._query)+this.hash},h.verify=function(a){return g.test(a)},c.exports=h});

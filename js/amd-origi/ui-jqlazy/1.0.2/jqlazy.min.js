define("jqlazy",["require","exports","module","jquery"],function(e,t,n){var r=e("jquery"),i=[],s=function(){var e=m();for(var t=0;t<i.length;t++)try{var n=i[t],r=n[0],s=n[1],o=r.data("offset.lazy"),f=s.condition(r,o)&&(s.top!=0||o.left!=0);f&&o.top+r.height()>e.top&&o.top<e.bottom&&(s.once&&d(r),s.beforeLoad(r,s),u(n))}catch(l){}a()},o=function(e){for(var t=0;t<i.length;t++){var n=i[t];if(n&&n[0].get(0)==e.get(0)){n[1].once&&d(n[0]),u(n);break}}},u=function(e){var t=e[0],n=e[1];n.type=="image"?function(e,t){setTimeout(function(){f(e,t)},0)}(t,n):n.type=="url"?function(e,t){setTimeout(function(){l(e,t)},0)}(t,n):function(e,t){setTimeout(function(){t.onLoad.call(e.get(0),t.res(e),t),r(window).trigger("scroll")},0)}(t,n)},a=function(){var e=function(e,t){var n=[];for(var r=0;r<i.length;r++)t(i[r],r,i)&&n.push(i[r]);return n};i=e(i,function(e){return!!e})},f=function(e,t){var n=t.res(e);e.one({"load.__lazy":function(n){t.onLoad.call(e.get(0),n,t),r(this).off(".lazy"),r(window).trigger("scroll")},"error.__lazy":function(n){t.onError.call(e.get(0),n,t),r(this).off(".__lazy"),r(window).trigger("scroll")}});var i=e.get(0);n!=null&&n!=""?(e.attr("src",n),i.complete||i.readyState===4?e.trigger("load"):i.readyState==="uninitialized"&&i.src.indexOf("data:")===0&&e.trigger("error")):e.trigger("error")},l=function(e,t){r.ajax(t.res(e)).done(function(n){t.onLoad.call(e.get(0),n,t)}).fail(function(n){t.onError.call(e.get(0),n,t)}).always(function(){r(window).trigger("scroll")})},c=function(){for(var e=0;e<i.length;e++){var t=i[e];t&&function(e){setTimeout(function(){e[0].data("offset.lazy",e[1].offset(e[0]))},0)}(t)}},h=function(){c(),setTimeout(function(){r(window).trigger("scroll")},10)},p=function(e,t){t||(t={}),r.isFunction(t.offset)||(t.offset=function(e){return e.offset()}),e.get(0).tagName.toLowerCase()=="img"&&(t.type="image"),t.condition||(t.condition=function(){return!0}),t.type=="image"&&(t.once=!0,t.res||(t.res=e.data("src")));if(!r.isFunction(t.res)){var n=t.res;t.res=function(){return n}}e.data("offset.lazy",t.offset(e)),t.beforeLoad||(t.beforeLoad=function(){}),t.onLoad||(t.onLoad=function(){}),t.onError||(t.onError=function(){}),i.push([e,t])},d=function(e){for(var t=0;t<i.length;t++){var n=i[t];if(n&&n[0].get(0)==e.get(0)){n[0].removeData("offset.lazy"),i[t]=null;break}}},v=function(e,t,n){var r,i=null,s=0;return function(){var o=new Date,u=t-(o-s);return n||(n=this),u<=0&&(clearTimeout(i),i=null,s=o,r=e.apply(n,arguments)),r}},m=function(){var e=r(window),t=e.scrollTop();return{top:t-r.lazy.sensitivity,bottom:t+e.height()+r.lazy.sensitivity}};r(window).on("scroll.__lazy",v(c,100)),r(window).on("scroll.__lazy",v(s,1)),r.fn.lazy=function(e){return e==="destroy"?this.each(function(){d(r(this))}):e=="load"?this.each(function(){o(r(this))}):(this.each(function(){var t=r(this);setTimeout(function(){p(t,r.extend(!0,{},e))},0)}),setTimeout(function(){r(window).trigger("scroll")},100)),this},r.lazy={refresh:h,sensitivity:50},n.exports=r});
define("attribute",["require","exports","module"],function(e,t,n){function u(e){return r.call(e)==="[object String]"}function a(e){return r.call(e)==="[object Function]"}function f(e){return e!=null&&e==e.window}function l(e){if(!e||r.call(e)!=="[object Object]"||e.nodeType||f(e))return!1;try{if(e.constructor&&!i.call(e,"constructor")&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}var n;if(s)for(n in e)return i.call(e,n);for(n in e);return n===undefined||i.call(e,n)}function c(e){if(!e||r.call(e)!=="[object Object]"||e.nodeType||f(e)||!e.hasOwnProperty)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function h(e,t){var n,r;for(n in t)t.hasOwnProperty(n)&&(e[n]=p(t[n],e[n]));return e}function p(e,t){return o(e)?e=e.slice():l(e)&&(l(t)||(t={}),e=h(t,e)),e}function v(e,t,n){var r=[],i=t.constructor.prototype;while(i)i.hasOwnProperty("attrs")||(i.attrs={}),g(n,i.attrs,i),c(i.attrs)||r.unshift(i.attrs),i=i.constructor.superclass;for(var s=0,o=r.length;s<o;s++)C(e,T(r[s]))}function m(e,t){C(e,T(t,!0),!0)}function g(e,t,n,r){for(var i=0,s=e.length;i<s;i++){var o=e[i];n.hasOwnProperty(o)&&(t[o]=r?t.get(o):n[o])}}function w(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n].value,i;a(r)&&(i=n.match(y))&&(e[i[1]](E(i[2]),r),delete t[n])}}function E(e){var t=e.match(b),n=t[1]?"change:":"";return n+=t[2].toLowerCase()+t[3],n}function S(e,t,n){var r={silent:!0};e.__initializingAttrs=!0;for(var i in n)n.hasOwnProperty(i)&&t[i].setter&&e.set(i,n[i],r);delete e.__initializingAttrs}function T(e,t){var n={};for(var r in e){var i=e[r];if(!t&&l(i)&&k(i,x)){n[r]=i;continue}n[r]={value:i}}return n}function C(e,t,n){var r,i,s;for(r in t)if(t.hasOwnProperty(r)){i=t[r],s=e[r],s||(s=e[r]={}),i.value!==undefined&&(s.value=p(i.value,s.value));if(n)continue;for(var o in N){var u=N[o];i[u]!==undefined&&(s[u]=i[u])}}return e}function k(e,t){for(var n=0,r=t.length;n<r;n++)if(e.hasOwnProperty(t[n]))return!0;return!1}function L(e){return e==null||(u(e)||o(e))&&e.length===0||c(e)}function A(e,t){if(e===t)return!0;if(L(e)&&L(t))return!0;var n=r.call(e);if(n!=r.call(t))return!1;switch(n){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase;case"[object Array]":var i=e.toString(),s=t.toString();return i.indexOf("[object")===-1&&s.indexOf("[object")===-1&&i===s}if(typeof e!="object"||typeof t!="object")return!1;if(l(e)&&l(t)){if(!A(d(e),d(t)))return!1;for(var o in e)if(e[o]!==t[o])return!1;return!0}return!1}t.initAttrs=function(e){var t=this.attrs={},n=this.propsInAttrs||[];v(t,this,n),e&&m(t,e),S(this,t,e),w(this,t),g(n,this,t,!0)},t.get=function(e){var t=this.attrs[e]||{},n=t.value;return t.getter?t.getter.call(this,n,e):n},t.set=function(e,t,n){var r={};u(e)?r[e]=t:(r=e,n=t),n||(n={});var i=n.silent,s=n.override,o=this.attrs,a=this.__changedAttrs||(this.__changedAttrs={});for(e in r){if(!r.hasOwnProperty(e))continue;var f=o[e]||(o[e]={});t=r[e];if(f.readOnly)throw new Error("This attribute is readOnly: "+e);f.setter&&(t=f.setter.call(this,t,e));var c=this.get(e);!s&&l(c)&&l(t)&&(t=h(h({},c),t)),o[e].value=t,!this.__initializingAttrs&&!A(c,t)&&(i?a[e]=[t,c]:this.trigger("change:"+e,t,c,e))}return this},t.change=function(){var e=this.__changedAttrs;if(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.trigger("change:"+t,n[0],n[1],t)}delete this.__changedAttrs}return this},t._isPlainObject=l;var r=Object.prototype.toString,i=Object.prototype.hasOwnProperty,s;(function(){function t(){this.x=1}var e=[];t.prototype={valueOf:1,y:1};for(var n in new t)e.push(n);s=e[0]!=="x"})();var o=Array.isArray||function(e){return r.call(e)==="[object Array]"},d=Object.keys;d||(d=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t});var y=/^(on|before|after)([A-Z].*)$/,b=/^(Change)?([A-Z])(.*)/,x=["value","getter","setter","readOnly"],N=["setter","getter","readOnly"]});
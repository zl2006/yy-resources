define("iframe-shim",["require","exports","module","jquery","position"],function(e,t,n){function o(e){this.target=r(e).eq(0)}function a(e){var t={display:"none",border:"none",opacity:0,position:"absolute"},n=e.css("zIndex");return n&&n>0&&(t.zIndex=n-1),r("<iframe>",{src:"javascript:''",frameborder:0,css:t}).insertBefore(e)}var r=e("jquery"),i=e("position"),s=(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6")!==-1;o.prototype.sync=function(){var e=this.target,t=this.iframe;if(!e.length)return this;var n=e.outerHeight(),r=e.outerWidth();return!n||!r||e.is(":hidden")?t&&t.hide():(t||(t=this.iframe=a(e)),t.css({height:n,width:r}),i.pin(t[0],e[0]),t.show()),this},o.prototype.destroy=function(){this.iframe&&(this.iframe.remove(),delete this.iframe),delete this.target};if(s)n.exports=o;else{function u(){}u.prototype.sync=function(){return this},u.prototype.destroy=u,n.exports=u}}),define("overlay",["require","exports","module","jquery","position","iframe-shim","widget"],function(e,t,n){function c(e){return r.contains(document.documentElement,e)}function h(e){r(u.blurOverlays).each(function(t,n){if(!n||!n.get("visible"))return;for(var i=0;i<n._relativeElements.length;i++){var s=r(n._relativeElements[i])[0];if(s===e.target||r.contains(s,e.target))return}n.hide()})}function p(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),t}var r=e("jquery"),i=e("position"),s=e("iframe-shim"),o=e("widget"),u=o.extend({attrs:{width:null,height:null,zIndex:99,visible:!1,align:{selfXY:[0,0],baseElement:i.VIEWPORT,baseXY:[0,0]},parentNode:document.body},show:function(){return this.rendered||this.render(),this.set("visible",!0),this},hide:function(){return this.set("visible",!1),this},setup:function(){var e=this;this._setupShim(),this._setupResize(),this.after("render",function(){var e=this.element.css("position");(e==="static"||e==="relative")&&this.element.css({position:"absolute",left:"-9999px",top:"-9999px"})}),this.after("show",function(){e._setPosition()})},destroy:function(){return p(this,u.allOverlays),p(this,u.blurOverlays),u.superclass.destroy.call(this)},_setPosition:function(e){if(!c(this.element[0]))return;e||(e=this.get("align"));if(!e)return;var t=this.element.css("display")==="none";return t&&this.element.css({visibility:"hidden",display:"block"}),i.pin({element:this.element,x:e.selfXY[0],y:e.selfXY[1]},{element:e.baseElement,x:e.baseXY[0],y:e.baseXY[1]}),t&&this.element.css({visibility:"",display:"none"}),this},_setupShim:function(){var e=new s(this.element);this.after("hide _setPosition",e.sync,e);var t=["width","height"];for(var n in t)t.hasOwnProperty(n)&&this.on("change:"+n,e.sync,e);this.before("destroy",e.destroy,e)},_setupResize:function(){u.allOverlays.push(this)},_blurHide:function(e){e=r.makeArray(e),e.push(this.element),this._relativeElements=e,u.blurOverlays.push(this)},_onRenderWidth:function(e){this.element.css("width",e)},_onRenderHeight:function(e){this.element.css("height",e)},_onRenderZIndex:function(e){this.element.css("zIndex",e)},_onRenderAlign:function(e){this._setPosition(e)},_onRenderVisible:function(e){this.element[e?"show":"hide"]()}});u.blurOverlays=[],r(document).on("click",function(e){h(e)});var a,f=r(window).width(),l=r(window).height();u.allOverlays=[],r(window).resize(function(){a&&clearTimeout(a),a=setTimeout(function(){var e=r(window).width(),t=r(window).height();(f!==e||l!==t)&&r(u.allOverlays).each(function(e,t){if(!t||!t.get("visible"))return;t._setPosition()}),f=e,l=t},80)}),n.exports=u});